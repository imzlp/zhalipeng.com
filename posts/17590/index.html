<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-tilt-brush.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-tilt-brush.png">
  <link rel="mask-icon" href="/images/favicon-32x32-tilt-brush.png" color="#222">
  <meta name="google-site-verification" content="ttIkhAIFZQM9Huj8roB0l95ePN2Tv2zv2wRFksi09WA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"imzlp.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"width":280},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="HotPatcher是我最近写的用于打包UE项目资源热更的工具，用于追踪工程版本的资源变动来打出Patch。支持一键Cook多平台，一键打包多平台Patch，编辑器支持Windows和MacOS，再写一套从服务器下载patch的流程就是一套完整的游戏热更方案。HotPatcher在项目里已经使用了一段时间，目前比较稳定，今天整理了一下文档，开源出来，会持续更新，欢迎提issus。 HotPatch">
<meta property="og:type" content="article">
<meta property="og:title" content="UE4资源热更打包工具HotPatcher">
<meta property="og:url" content="https://imzlp.com/posts/17590/index.html">
<meta property="og:site_name" content="Z&#39;s Blog">
<meta property="og:description" content="HotPatcher是我最近写的用于打包UE项目资源热更的工具，用于追踪工程版本的资源变动来打出Patch。支持一键Cook多平台，一键打包多平台Patch，编辑器支持Windows和MacOS，再写一套从服务器下载patch的流程就是一套完整的游戏热更方案。HotPatcher在项目里已经使用了一段时间，目前比较稳定，今天整理了一下文档，开源出来，会持续更新，欢迎提issus。 HotPatch">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-CookContent.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-Export-Release.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-Export-Patch.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-Export-Patch-Filter.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/hotpatcher-chunk-options.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/hotpatcher-pak-options-replace-pak-command-texts.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/hotpatcher-unrealpak-options-advanced.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20201031181100.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/add-to-patch-settings.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20210315153529.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20210315153409.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20210119112031.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20210114164028.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20210114211217.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/hotpatcher-import-project-setting.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20201211131553.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/cook-patch-assets.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/add-to-patch-settings.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20201031181100.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20201031094735.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/20201027123319.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/recursivr-widget-tree.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/hotpatcher-chunk-settings.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/hotpatcher-chunk-bmonilithic-mode-generated-files.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-Diff-view.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-GeneratedPatch-ErrorMsg.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-diff-specifty-assets.webp">
<meta property="og:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-Add-Specify-Cook-Directories.webp">
<meta property="article:published_time" content="2020-01-15T09:41:30.000Z">
<meta property="article:modified_time" content="2020-08-31T17:27:31.000Z">
<meta property="article:author" content="查利鹏">
<meta property="article:tag" content="Unreal Engine">
<meta property="article:tag" content="热更新">
<meta property="article:tag" content="HotPatcher">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imzlp.com/posts/17590/HotPatcher/HotPatcher-CookContent.webp">

<link rel="canonical" href="https://imzlp.com/posts/17590/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>UE4资源热更打包工具HotPatcher | Z's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66450323-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-66450323-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Z's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">循迹研究室</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        
            
  <li class="menu-item menu-item-notes">

    <a href="/notes/" rel="section"><i class="fa fa-edit fa-fw"></i>笔记</a>

  </li>


      
        
            
  <li class="menu-item menu-item-essay">

    <a href="/essay/" rel="section"><i class="fas fa-feather-alt fa-fw"></i>随笔</a>

  </li>


      
        <li class="menu-item menu-item-feeds">

    <a href="/feeds/" rel="section"><i class="fas fa-rss fa-fw"></i>资讯</a>

  </li>
        
            
  <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-inbox fa-fw"></i>资源</a>

  </li>


      
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fas fa-link fa-fw"></i>友链</a>

  </li>
        
            
  <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>


      
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fas fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-changelog">

    <a href="/changelog/" rel="section"><i class="fa fa-history fa-fw"></i>站点日志</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>站内搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

  <div id="google_translate_element"></div>
  <script type="text/javascript">
    function googleTranslateElementInit()
    {
      var google_translate_element = document.getElementById('google_translate_element');
      var timer = setInterval(function() 
      {
        google_translate_element = document.getElementById('google_translate_element');
        if (google_translate_element) 
        {
          clearInterval(timer);
          new google.translate.TranslateElement(
          {
            pageLanguage: 'zh-CN',
            
              includedLanguages: 'en,zh-CN,ru,ja',
            
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: true
          },
          'google_translate_element');

          
            // 清除图片的请求
            img = [].slice.call(document.querySelectorAll('#goog-gt-tt img,#google_translate_element img'));
            img.forEach(function(v, i) {v.src = '';});
          
          var google_language_selector = document.getElementById(':0.targetLanguage');
          google_language_selector.style.backgroundColor = "#ffffffb5";
          google_language_selector.style.border = "0px solid #ffffffb5";
        }
      }, 300);
    }
  </script>
  <script type="text/javascript" src="//translate.google.cn/translate_a/element.js?cb=googleTranslateElementInit"></script>



</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzlp.com/posts/17590/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="查利鹏">
      <meta itemprop="description" content="每一篇文章都是一个成长的过程。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          UE4资源热更打包工具HotPatcher
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-15 09:41 09:41:30:41" itemprop="dateCreated datePublished" datetime="2020-01-15T09:41:30+00:00">2020-01-15 09:41</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unreal-Engine/" itemprop="url" rel="index"><span itemprop="name">Unreal Engine</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unreal-Engine/%E7%83%AD%E6%9B%B4%E6%96%B0/" itemprop="url" rel="index"><span itemprop="name">热更新</span></a>
                </span>
            </span>

          
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>17k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>43 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a>是我最近写的用于打包UE项目资源热更的工具，用于追踪工程版本的资源变动来打出Patch。支持一键Cook多平台，一键打包多平台Patch，编辑器支持Windows和MacOS，再写一套从服务器下载patch的流程就是一套完整的游戏热更方案。<a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a>在项目里已经使用了一段时间，目前比较稳定，今天整理了一下文档，开源出来，会持续更新，欢迎提issus。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher">HotPatcher</a>与UnrealFrontEnd中的Patch不同，UE的Patch管理工程时存在一些问题：同样的工程版本，很难在不同的电脑上打出相同的Patch，也无法基于Patch的版本再打出一个Patch，Patch包含的内容不方便预览。在日常开发中还需要能够方便地能够把外部文件打包到pak中（如lua文件、db等non-assets，往往不在Content目录下），并且也需要方便地管理工程和Patch版本。</p>
<p>这个插件就是为了解决上面这样的问题，以项目资源来记录版本，可以只管理工程本身而无需关注UE生成的其他信息。并且可以方便地进行Cook/生成Pak/提取基础包中的资源信息等操作。</p>
<blockquote>
<p>目前支持的引擎版本为UE4.21-UE4.26，最近有很多朋友私信来问插件相关的问题，我创建了个群来讨论UE4热更新和HotPatcher插件的问题(QQ群958363331)，欢迎加入交流UE4相关的技术。</p>
</blockquote>
<p>为了方便地统一收集和管理热更新和HotPatcher常见的问题与解决方案，我新建了一篇文章来记录和整理：<a href="https://imzlp.com/posts/16895/">UE4热更新：Questions &amp; Answers</a>，遇到问题可以先去看这个FAQ页面。</p>
<a id="more"></a>
<p><strong>注意</strong>：该插件只能打出包含UE的资源以及添加的外部文件作为热更的内容（支持lua），修改的C++代码无法热更，需要自己设计好架构。如果是纯蓝图项目则可以完全使用这个工具进行热更。</p>
<p>HotPatcher插件支持根据选择只打包指定的资源（可以指定<strong>包含过滤器</strong>以及<strong>忽略过滤器</strong>以及可以<strong>指定单个资源</strong>），支持资源的<strong>递归依赖分析</strong>（如只打包某个地图及其所有依赖的资源），打包的Path中可以选择不包含未引用的资源，也不会包含未改动的资源，还会分析项目中的无效资产以及忽略重定向器的资源，实现了<strong>基于项目资产的版本追踪</strong>而无需管理额外的内容（如DDC），只需要在打Patch之前Cook一遍保证Cook的内容是基于最新工程版本的即可（也支持在生成Patch时自动Cook所有要包含的资源）。而且还<strong>支持Chunk</strong>、支持<code>bMonilithic</code>模式，配置化的方式支持随意组合，支持<strong>多线程打包</strong>、<strong>支持导出资源的依赖关系</strong>，而且还支持通过Commandlet来执行Cook和Patch以及Release信息的导出，可以随意结合ci/cd实现自己的出包流程。</p>
<p>除了包含UE的资源文件外，额外的支持：</p>
<ul>
<li>支持包含项目Cook出的非资源文件。如AssetRegistry.bin/GlobalShaderCache*.bin/ShaderBytecode*.ushaderbytecode；</li>
<li>支持包含引擎、项目、和插件的ini文件；</li>
<li>支持包含外部的文件夹和文件（如lua文件，视频文件等），并且可以自定义挂载点，供运行时访问；</li>
<li>打出的pak中可以不包含任何UE的资源文件（只要在HotPatcher中不添加任何资源即可），方便只更新lua的代码或者只更新Ini之类的配置文件；</li>
<li>支持分析不同平台的基础包的差异，生成统一的基础包描述文件，用于后续热更的版本比对。</li>
</ul>
<p>插件的其他功能：</p>
<ul>
<li>支持Cook单个资源；</li>
<li>支持从PakList*.txt中导入多平台的基础包信息</li>
<li>支持基于上一个patch版本再打出一个patch版本；</li>
<li>支持检测未cook的资源；</li>
<li>支持版本间的diff，可以看到新增、修改、删除（但是删除的资源在之前的版本的pak中是无法删除的，只是diff展示用）的资源信息；</li>
<li>支持检测重复的文件包含；</li>
<li>支持导出该插件所有的中间生成信息和配置；</li>
<li>支持自定义UnrealPak的参数(可以自己指定加密参数与项目统一)；</li>
<li>支持同时打出多个平台的patch；</li>
<li>支持Patch的Chunk，指定在一个Patch版本中把资源分别打包到多个Pak中；</li>
<li>支持检测Chunk的文件包含进行错误处理</li>
<li>支持把Patch中的每个资源单独打包为pak，支持任意资源（包括但不限于UE asset/外部文件/各种cooked的bin数据、ini）只要是hotpatcher里可以添加的都可以单独打成pak。</li>
<li>支持多线程打包pak，不启动<code>UrealPak.exe</code>，提高执行效率。</li>
<li>支持导出所选资源的依赖关系</li>
<li>编辑器支持Cook/AddToPatchSettings等功能，方便编辑器下的操作</li>
</ul>
<p>同时，我也写了一个批量Cook的工具，用于一键Cook指定的多个平台（当然使用命令行也可以），目的就是使用最少的步骤完成任务。</p>
<p>我录了一个插件使用说明的视频（汗，第一次录视频还有点紧张）：</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/uDIP73unX8c" frameborder="0" loading="lazy" allowfullscreen></iframe></div>

<p>如果不能翻墙可以看B站的链接：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Tz4y197tR/">UE4热更新：HotPatcher插件使用教程</a></p>
<h3 id="插件使用流程"><a href="#插件使用流程" class="headerlink" title="插件使用流程"></a>插件使用流程</h3><blockquote>
<p>为了方便版本管理，项目<strong>一定要</strong>使用某种版本控制工具，建议Git.</p>
</blockquote>
<ol>
<li>打开HotPatcher，选择ByRelease，导出<code>*_Release.json</code>，其中记录了所指定的每个资源的信息；</li>
<li>使用UE直接打包任意平台的项目（如windows/android/ios）</li>
<li>在工程中修改/添加/删除资源，修改引擎/项目/插件的设置等；</li>
<li>打开HotPatch，在Cook项选择你要打Patch的平台并执行Cook；</li>
<li>打开HotPatcher，选择ByPatch，以上面导出的<code>*_Release.json</code>为基础版本，根据需求选择你需要打到Pak中的内容；</li>
<li>点击<code>GeneratedPatch</code>，会生成Pak文件和各种信息（其中也包含当前版本的<code>*_Release.json</code>，使Patch可以增量更新）</li>
<li>生成的Pak中就包含了与上次打出的包中所有差异的内容。</li>
</ol>
<h3 id="Cook参数说明"><a href="#Cook参数说明" class="headerlink" title="Cook参数说明"></a>Cook参数说明</h3><p>HotPatcher中的Cook部分是为了打Patch时方便Cook多个平台，以及方便指定地图（插件会扫描整个项目中的所有地图并列出），不用每次Cook都使用命令行。</p>
<p><img data-src="HotPatcher/HotPatcher-CookContent.webp"></p>
<p>Cook可选的分为<code>Platforms</code>/<code>Map(s)</code>/<code>Settings</code>：</p>
<ul>
<li><code>Platforms</code>：选择Cook 的平台，可以多选；</li>
<li><code>Map(s)</code>：选择要Cook的Map，该选项下会列出当前工程里所有的Map，可以多选（代码里我也提供了列出引擎和插件目录下Map的选项，如果需要可以在<code>HotPatcherEditor.build.cs</code>中通过控制<code>ENABLE_COOK_ENGINE_MAP</code>和<code>ENABLE_COOK_PLUGIN_MAP</code>的值来自行开启）；</li>
<li><code>Filter(s)</code>：可以选择只Cook指定的目录，可以添加多个；</li>
<li><code>Settings</code>：选择Cook设置，默认提供了<code>Iterator</code>/<code>UnVersioned</code>/<code>CookAll</code>/<code>Compressed</code>四个选项，我也提供了<code>OtherOptions</code>可以自己指定要Cook 的参数。</li>
</ul>
<blockquote>
<p>注意：<code>Map(s)</code>中的地图和<code>Settings</code>中的<code>CookAll</code>必须要选中其中的一个或者<code>Filters</code>中具有指定的目录才可以执行Cook，如果只选了CookMap，则只会Cook该Map所引用到的资源，没有被引用的不会被Cook，这个需要注意。</p>
</blockquote>
<p>点击CookContent之后会将Cook的log输出到UE的<code>OutputLog</code>中。</p>
<h3 id="ByRelease参数说明"><a href="#ByRelease参数说明" class="headerlink" title="ByRelease参数说明"></a>ByRelease参数说明</h3><blockquote>
<p>ByRelease操作导出的是一个json的文件，记录了导出时所选择的每个Asset资源的HASH值，基于此HASH值我们可以在后续的Patch中知道该资源是不是被修改了。</p>
</blockquote>
<p><img data-src="HotPatcher/HotPatcher-Export-Release.webp"></p>
<h4 id="Release-Settings"><a href="#Release-Settings" class="headerlink" title="Release Settings"></a>Release Settings</h4><ul>
<li><strong>VersionId</strong>：指定当前导出的资源信息是什么版本。</li>
<li><strong>ByPakList</strong>：从PakList导入来生成Release的配置。</li>
<li><strong>PlatformsPakListFiles</strong>：打基础包生成的<code>PakList*.txt</code>文件，可以同时指定多个平台，用于分析各个平台的文件差异，并记录这些差异来生成项目在这些平台的Release.json文件，用于统一描述多个平台的基础包信息。</li>
</ul>
<blockquote>
<p>在不通过指定<code>PakList*.txt</code>导出Release的情况下，导出的release.json中只包含项目中有引用的资源，没有引用的不会包含。但是引擎默认打包时会把一些没有引用的资源也打包到里面，这就会导致一些资源在基础包中事实上已经存在了，但是在release.json中没有记录，有用到这些资源的话会导致重复包含（使用时没有问题，只是这些资源在pak中会有两份）。使用<code>PakList*.txt</code>就不会存在这个问题。</p>
</blockquote>
<ul>
<li><strong>IncludeFilter</strong>：当前Release扫描哪些目录下的资源。</li>
<li><strong>IgnoreFilter</strong>：当前Release忽略哪些目录下的资源。</li>
<li><strong>bAnalysisFilterDependencies</strong>：对所选过滤器的资源进行依赖分析</li>
<li><strong>AssetRegistryDependencyTypes</strong>：对所选过滤器中得资源进行依赖分析时要包含的引用资源类型，依赖于<strong>bAnalysisFilterDependencies</strong>是否启用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> EAssetRegistryDependencyType</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">enum</span> Type</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// Dependencies which don&#x27;t need to be loaded for the object to be used (i.e. soft object paths)</span></span><br><span class="line">		Soft = <span class="number">0x01</span>,</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Dependencies which are required for correct usage of the source asset, and must be loaded at the same time</span></span><br><span class="line">		Hard = <span class="number">0x02</span>,</span><br><span class="line"></span><br><span class="line">		<span class="comment">// References to specific SearchableNames inside a package</span></span><br><span class="line">		SearchableName = <span class="number">0x04</span>,</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Indirect management references, these are set through recursion for Primary Assets that manage packages or other primary assets</span></span><br><span class="line">		SoftManage = <span class="number">0x08</span>,</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Reference that says one object directly manages another object, set when Primary Assets manage things explicitly</span></span><br><span class="line">		HardManage = <span class="number">0x10</span>,</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Note: Also update FAssetRegistryDependencyOptions when adding more flags</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> Type None = (Type)(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> Type All = (Type)(Soft | Hard | SearchableName | SoftManage | HardManage);</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> Type Packages = (Type)(Soft | Hard);</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> Type Manage = (Type)(SoftManage | HardManage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Soft</code>是具有<code>FSoftObjectReference</code>的资源引用，<code>Hard</code>是直接的资源引用，如果想要Soft和Hard都包含，可以选择<code>Package</code>，这个选项默认情况下选<code>Package</code>就好，除非你自己来处理资源引用关系。</p>
<ul>
<li><strong>IncludeHasRefAssetsOnly</strong>：对选中的过滤器中的资源文件进行依赖分析（递归分析至Map），如果资源没有被引用则不会打包到Patch中。</li>
<li><strong>IncludeSpecifyAssets</strong>：结构的数组，可以指定当前Release中的单个资源，该结构的第一个参数需要指定资源，第二个参数控制是否分析并包含当前指定资源的依赖到pak中。</li>
<li><strong>Add Extern Assets to Platform</strong>：用于指定在不同的平台包含的不同的文件。<ul>
<li><strong>Target Platform</strong>：包含这些文件的平台（AllPlatform则是每个平台都包含）</li>
<li><strong>AddExternFileToPak</strong>：记录Release中包含的非资源文件</li>
<li><strong>AddExternDirectoryToPak</strong>：记录Release中包含的非资源文件</li>
</ul>
</li>
</ul>
<blockquote>
<p><code>AddExternFileToPak</code>和<code>AddExternDirectoryToPak</code>对应的是<code>Project Settings</code>-<code>Packing</code>中的<code>Additional Non-Asset Directories To Package</code>等设置，用于标记本地包中所包含的非资源文件。</p>
</blockquote>
<h4 id="SaveTo"><a href="#SaveTo" class="headerlink" title="SaveTo"></a>SaveTo</h4><ul>
<li><strong>SaveAssetDependency</strong>：是否存储当前Release版本中所选资源的依赖关系。</li>
<li><strong>SaveReleaseConfig</strong>：是否存储当前Release的所有选项信息。</li>
<li><strong>bBackupMetadatas</strong>：是否备份当前版本的Metadata目录。</li>
<li><strong>BackupMetdataPlatforms</strong>：选择要备份Metadata的平台，该选项依赖于<code>bBackupMetadatas=true</code>。</li>
<li><strong>SavePath</strong>：本次的Release信息存储位置。会在当前目录下创建出名字为<code>VersionId</code>的文件夹，所有的文件在此文件夹中。</li>
</ul>
<blockquote>
<p>注意：导出Release时，资源的包含需要与UE直接打包时的设置一致，因为这里导出的Release是记录使用UE直接打出的包所包含的资源。</p>
</blockquote>
<h3 id="ByPatch参数说明"><a href="#ByPatch参数说明" class="headerlink" title="ByPatch参数说明"></a>ByPatch参数说明</h3><blockquote>
<p>ByPatch是真正执行打包出Pak的工具，可以基于之前导出的版本(通过ByRelease导出的Json文件)，也可以包含外部文件/文件夹、配置文件（ini）、Cook出的非资源文件（AssetRegistry.bin等），并且可以指定多个平台，支持输入UnrealPak的参数，可以导出当前Patch的各种信息。</p>
</blockquote>
<p><img data-src="HotPatcher/HotPatcher-Export-Patch.webp"></p>
<p>支持指定资源过滤器：</p>
<p><img data-src="HotPatcher/HotPatcher-Export-Patch-Filter.webp"></p>
<p>HotPatcher打Patch的选项解析：</p>
<h4 id="BaseVersion"><a href="#BaseVersion" class="headerlink" title="BaseVersion"></a>BaseVersion</h4><ul>
<li><strong>bByBaseVersion</strong>：是否是基于某个基础版本的Patch，若为<code>false</code>，则只打包选择的过滤器文件（依然会分析依赖）和添加的外部文件，若为<code>true</code>则必须要指定一个基础版本，否则无法执行Patch。同时该属性也会控制是否生成<code>Diff</code>信息，若为<code>false</code>则不生成<code>Diff</code>（没有基础版本diff也无意义）。</li>
<li><strong>BaseVersion</strong>：该选项应选择Patch所基于的版本文件，可以<code>ByRelease</code>或者上次一的Patch生成，默认为<code>*_Release.json</code>。</li>
</ul>
<h4 id="PatchSettings"><a href="#PatchSettings" class="headerlink" title="PatchSettings"></a>PatchSettings</h4><ul>
<li><strong>VersionId</strong>：当前Patch的版本的ID</li>
<li><strong>IncludeFilter</strong>：当前Patch扫描哪些目录下的资源变动。</li>
<li><strong>IgnoreFilter</strong>：当前Patch忽略哪些目录下的资源变动（资源依赖分析之前）。</li>
<li><strong>bForceSkipContent</strong>：是否开启强制忽略掉某些资源（对Patch的最终结果进行过滤）</li>
<li><strong>Force Skip Content Rules</strong>：强制忽略掉某些目录下的资源（对Patch的最终结果进行过滤），可以用于忽略Editor的Content内容，如<code>/Engine/Editor</code>和<code>/Engine/VREditor</code>等。</li>
<li><strong>Force Skip Assets</strong>：再Patch的最终结果中忽略掉指定的资源。</li>
<li><strong>bAnalysisFilterDependencies</strong>：对所选过滤器的资源进行依赖分析</li>
<li><strong>Recursive Widget Tree</strong>：对于当前Patch中变动的UserWidget资源，递归分析包含它们的parent Widget资源，并包含进Patch中，用于解决修改了子控件，父控件不生效的问题。</li>
<li><strong>AssetRegistryDependencyTypes</strong>：与<code>Release</code>中描述的含义相同。</li>
<li><strong>IncludeHasRefAssetsOnly</strong>：对选中的过滤器中的资源文件进行依赖分析（递归分析至Map），如果资源没有被引用则不会打包到Patch中。</li>
<li><strong>IncludeSpecifyAssets</strong>：结构的数组，可以指定需要打到Pak中的单个资源，该结构的第一个参数需要指定资源，第二个参数控制是否分析并包含当前指定资源的依赖到pak中，第三个参数<strong>AssetRegistryDependencyTypes</strong>与<code>Release</code>中描述的含义相同。。</li>
<li><strong>IncludeAssetRegistry</strong>：在当前的Patch打出的Pak中包含<code>AssetRegistry.bin</code>文件。</li>
<li><strong>IncludeGlobalShaderCache</strong>：在当前的Patch打出的Pak中包含<code>GlobalShaderCache-*.bin</code>文件。</li>
<li><strong>IncludeShaderBytecode</strong>：在当前Patch打出的Pak中包含<code>PROJECT_NAME\Content\ShaderArchive*.ushaderbytecode</code>文件。</li>
<li><strong>IncludeEngineIni</strong>：在当前打出的Patch中包含引擎目录下的ini，也会包含平台相关的ini</li>
<li><strong>IncludePluginIni</strong>：在当前打出的Patch中包含所有启用的插件中的ini（引擎目录和项目目录的插件都会包含）</li>
<li><strong>IncludeProjectIni</strong>：在当前的Patch打出的Pak中包含项目的ini文件（不会包含<code>DefaultEditor*.ini</code>）</li>
<li><strong>bEnableExternFilesDiff</strong>：是否对添加的外部文件进行Diff比对，用于只打包修改或者新增的外部文件。</li>
<li><strong>Add Extern Assets to Platform</strong>：用于指定在不同的平台包含的不同的文件。<ul>
<li><strong>Target Platform</strong>：包含这些文件的平台（AllPlatform则是每个平台都包含）</li>
<li><strong>AddExternFileToPak</strong>：添加外部的非资源文件到Pak中，如txt、视频。</li>
<li><strong>AddExternDirectoryToPak</strong>：记录Release中包含的非资源文件</li>
</ul>
</li>
</ul>
<p><strong>AddExternFileToPak</strong>的元素要求：</p>
<ol>
<li><code>FilePath</code>需要指定所选文件的路径。</li>
<li><code>MountPath</code>为该文件被打包到Pak中的挂载路径，默认是<code>../../../PROJECT_NAME/</code>下。</li>
</ol>
<p>在游戏运行时可以通过<code>FPaths::ProjectDir</code>来访问。<br>如，AAAA.json的<code>MountPath</code>为<code>../../../HotPatcherExample/AAAAA.json</code>，在运行时加载的路径：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FPaths::Combine(FPaths::ProjectDir(),TEXT(&quot;AAAAAA.json&quot;));</span><br></pre></td></tr></table></figure>
<p>Pak中的所有文件可以通过<code>IPlatformFile</code>来访问。</p>
<ul>
<li><p><strong>AddExternDirectoryToPak</strong>：结构的数组，添加外部文件夹到Pak中，该结构第一个参数(<code>DirectoryPath</code>)为指定系统中的文件夹路径，第二个参数(<code>Mount Point</code>)指定该路径在Pak中的挂载路径；指定文件夹下的所有文件会被递归包含，并且挂载路径均相对于所指定的<code>MountPoint</code>。</p>
</li>
<li><p><strong>IncludePakVersionFile</strong>：是否在当前打出的Patch中存储版本信息。</p>
</li>
<li><p><strong>PakVersionFileMountPoint</strong>：由<code>IncludePakVersionFile</code>控制是否可以编辑，用于指定<code>*_PakVersion.json</code>文件在Pak文件中的挂载点，默认为<code>../../../PROJECT_NAME/Extention/Versions</code>。</p>
</li>
</ul>
<h4 id="ChunkOptions"><a href="#ChunkOptions" class="headerlink" title="ChunkOptions"></a>ChunkOptions</h4><p>我为HotPatch增加了Chunk的功能，支持把一个Patch中的资源分别打包到不同的Pak中去。如把一个Patch中的所有<code>Package</code>打包到一个pak里（或者把当前Patch的指定地图打包到某个pak里），所有的lua打包到另一个pak里。</p>
<p><img data-src="hotpatcher-chunk-options.webp"></p>
<p>Chunk支持的参数如下：</p>
<ul>
<li><code>bEnableChunk</code>：是否对当前的Patch执行Chunk</li>
<li><code>ChunkInfos</code>：Chunk信息的列表，用于指定Chunk中应该包含哪些资源。</li>
</ul>
<p><code>ChunkInfos</code>的是一个<code>FChunkInfo</code>的结构数组，其结构的成员为：</p>
<ul>
<li><code>ChunkName</code>：当前Chunk的名字</li>
<li><code>bMonolithic</code>：是否为当前Chunk里的每个资源打出Pak（已支持），在开启<code>bMonolithic</code>模式时，会禁止添加外部文件和ini/Cook的内部数据，不然存放路径会有些歧义。</li>
<li><code>MonolithicPathMode</code>：单片模式的pak存储路径模式，<code>MountPath</code>是<code>Mount</code>的方式，<code>PackagePath</code>是资源的<code>LongPackageName</code>的路径。</li>
<li><code>bSavePakCommands</code>：是否存储当前Chunk的<code>PakCommand.txt</code></li>
<li><code>AssetIncludeFilters</code>：指定Chunk中的资源过滤器（注意所选过滤器中的资源不会进行依赖分析）</li>
<li><code>AssetIgnoreFilters</code>：指定Chunk的忽略过滤器</li>
<li><strong>bAnalysisFilterDependencies</strong>：对所选过滤器的资源进行依赖分析</li>
<li><code>AssetRegistryDependencyTypes</code>：与<code>Release</code>中描述的含义相同。</li>
<li><code>IncludeSpecifyAssets</code>：指定Chunk中包含哪些单个资源，支持进行依赖分析</li>
<li><code>AddExternFileToPak</code>：添加外部文件到Chunk</li>
<li><code>AddExternDirectoryToPak</code>：添加外部目录到Chunk，支持递归分析</li>
<li><code>InternalFiles</code>：用于指定Chunk中是否包含<code>AssetRegistry.bin</code>和<code>Ini</code>等文件</li>
</ul>
<p>基本上Chunk的参数和Patch选择的参数的一致，可以按照需求配置。</p>
<blockquote>
<p>注意：Chunk的原理是：先在Patch的设置中选择资源，会执行一遍整个Patch的资源分析，分析出来的结果用于Chunk配置的过滤，意思就是Chunk中所包含的资源必须是本次Patch的中具有的，一定要注意<strong>AssetIncludeFilters</strong>不会进行依赖分析，如果你Patch中的过滤器中的资源引用到了其他模块，比如引擎或者插件，在Chunk中也需要指定相应的目录到过滤器。</p>
<p>每个Chunk中所指定的资源可以重复，一份资源可以在ChunkA中包含也可以被ChunkB包含。</p>
</blockquote>
<p>而且我还给Chunk增加了错误提示，如果开启了Chunk模式，但是Patch中的所有资源没有在Chunk中全部指定，会在HotPatcher底部的<code>Infomations</code>中提示有哪些资源没有在Chunk中被包含，方便进行错误处理。</p>
<p><strong>bMonolithic模式</strong>：</p>
<ul>
<li>会把Chunk中所有的单个资源、文件都单独打包为一个pak</li>
<li>存放路径为该资源的<code>mount point</code>路径</li>
</ul>
<h4 id="PakOptions"><a href="#PakOptions" class="headerlink" title="PakOptions"></a>PakOptions</h4><ul>
<li><strong>bCookPatchAssets</strong>：是否开启为Patch中的uasset进行Cook，如果开启会在打包时对当前Patch中的所有uasset资源进行Cook（会增加Patch的生成时间，需要等待Cook完成）</li>
<li><strong>PakCommandOptions</strong>：该数组可以指定<code>*PakCommand.txt</code>中每条要打包到pak中资源的的参数。</li>
<li><strong>ReplacePakCommandTexts</strong>：用于替换PakCommand.txt中的文本</li>
</ul>
<p><img data-src="HotPatcher/hotpatcher-pak-options-replace-pak-command-texts.webp"></p>
<ul>
<li><strong>UnrealPakOptions</strong>：该数组为<code>UnrealPak.exe</code>程序的参数。如果什么都不指定，默认的配置为<code>UnrealPak.exe PAKFILE.pak -create=PAK_LIST.txt</code>。</li>
<li><strong>PakTargetPlatforms</strong>：该数组为选择要打出的Patch的平台，可以多选，一定要注意所选的平台已经被Cook。</li>
</ul>
<p><strong>PakOptions Advanced</strong>:</p>
<p><img data-src="HotPatcher/hotpatcher-unrealpak-options-advanced.webp"></p>
<ul>
<li><strong>bCustomPakNameRegular</strong>：是否重写Pak命名规则，控制<strong>PakNameRegular</strong>是否可修改。</li>
<li><strong>PakNameRegular</strong>：生成Pak的命名规则，可以通过预置变量值来控制，目前预置值有：<code>&#123;VERSION&#125;</code>/<code>&#123;BASEVERSION&#125;</code>/<code>&#123;CHUNKNAME&#125;</code>/<code>&#123;PLATFORM&#125;</code>四个值，在生成时会替换为当前配置的具体值，默认的命名规则为<code>&#123;VERSION&#125;_&#123;CHUNKNAME&#125;_&#123;PLATFORM&#125;_001_P</code>，如果在没有开启Chunk的情况下，<code>&#123;CHUNKNAME&#125;</code>值为空，并且会处理掉两个连续的<code>__</code>。</li>
</ul>
<h4 id="SaveTo-1"><a href="#SaveTo-1" class="headerlink" title="SaveTo"></a>SaveTo</h4><ul>
<li><strong>SaveDeletedAssetsToNewReleaseJson</strong>：控制ContentBrowser中删除的资源是否存储到新ReleaseJson中去，具体描述请看<a href="https://imzlp.com/posts/17590/#2020-11-07-Update">2020.11.07 Update</a>。</li>
<li><strong>SavePakList</strong>：是否存储<code>UnrealPak.exe</code> 的<code>-Create</code>参数文件。</li>
<li><strong>SaveDiffAnalysis</strong>：是否存储当前的Patch版本与Base版本的差异信息。</li>
<li><strong>SaveAssetDependency</strong>：是否存储当前Patch版本中所选资源的依赖关系。</li>
<li><strong>SavePatchConfig</strong>：是否存储当前Patch的所有选项信息。</li>
<li><strong>bBackupMetadatas</strong>：是否备份当前版本的Metadata目录。</li>
<li><strong>SavePath</strong>：本次的Patch信息存储位置。会在当前目录下创建出名字为<code>VersionId</code>的文件夹，所有的文件在此文件夹中。</li>
</ul>
<h3 id="Commandlet"><a href="#Commandlet" class="headerlink" title="Commandlet"></a>Commandlet</h3><p>我给插件提供了四个个Commandlet，分别是<code>HotCooker</code>和<code>HotPatcher</code>以及<code>HotRelease</code>和<code>HotShaderPatch</code>，用于Cook、Patch生成、导出Release信息以及ShaderPatch，</p>
<p>这四个Commandlet都可以指定<code>-wait</code>参数当Commandlet执行完毕时等待输入（防止窗口自动关闭）。</p>
<p>Commandlet指定的<code>-config</code>文件中的属性可以被替换，使用<code>-PropertyName=</code>来指定（目前不支持指定数组），如果是结构的嵌套属性，如<code>SavePath.Path</code>这样的成员属性，可以通过<code>.</code>来指定：<code>-savepath.path=</code>。</p>
<p>HotPatcher的Commandlet增强支持可以看更新Log：<a href="#2021.01.14-Update">2021.01.14 Update</a></p>
<h4 id="HotCooker"><a href="#HotCooker" class="headerlink" title="HotCooker"></a>HotCooker</h4><p>Cooker使用方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe PROJECT.uproject -run=HotCooker -config=<span class="string">&quot;cook-config.json&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在编辑器中导出cook配置的时候如果选中了所有地图，会在导出的配置文件里会把bCookAllMap为true，在Cook的Commandlet里执行就会Cook所有地图了，而且只要bCookAllMap为true就会Cook所有地图，和CookMaps里的地图数量没关系。</p>
</blockquote>
<h4 id="HotPatcher"><a href="#HotPatcher" class="headerlink" title="HotPatcher"></a>HotPatcher</h4><p>Patcher使用方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe PROJECT.uproject -run=HotPatcher -config=<span class="string">&quot;patch-config.json&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="HotRelease"><a href="#HotRelease" class="headerlink" title="HotRelease"></a>HotRelease</h4><p>Release使用方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe PROJECT.uproject -run=HotRelease -config=<span class="string">&quot;export-release-config.json&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="HotShaderPatch"><a href="#HotShaderPatch" class="headerlink" title="HotShaderPatch"></a>HotShaderPatch</h4><p>ShaderPatch使用方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UE4Editor.exe PROJECT.uproject -run=HotShaderPatch -config=<span class="string">&quot;export-shaderpatch-config.json&quot;</span></span><br></pre></td></tr></table></figure>

<p>它们的<code>-config</code>参数所接收的文件都可以从编辑器中通过插件导出。</p>
<h3 id="编辑器支持-UE4-23"><a href="#编辑器支持-UE4-23" class="headerlink" title="编辑器支持(UE4.23+)"></a>编辑器支持(UE4.23+)</h3><p>HotPatcher添加了在ContentBrowser中对资源选中的右键菜单扩展，可以实现一键Cook、添加所选的资源至Patch Setting的功能。</p>
<h4 id="Cook"><a href="#Cook" class="headerlink" title="Cook"></a>Cook</h4><p><img data-src="20201031181100.webp"></p>
<h4 id="AddToPatchSettings"><a href="#AddToPatchSettings" class="headerlink" title="AddToPatchSettings"></a>AddToPatchSettings</h4><p><img data-src="add-to-patch-settings.webp"></p>
<h3 id="Update-Log"><a href="#Update-Log" class="headerlink" title="Update Log"></a>Update Log</h3><script src="https://gist.github.com/imzlp/69a2b196589490a5ef7b0ab1f13a4ef1.js"></script>

<h4 id="2021-03-15-Update"><a href="#2021-03-15-Update" class="headerlink" title="2021.03.15 Update"></a>2021.03.15 Update</h4><ul>
<li>增加Release/Patch备份Metadata目录的选项</li>
</ul>
<p><img data-src="20210315153529.webp" alt="Release Settings"></p>
<p><img data-src="20210315153409.webp" alt="Patch Settings"></p>
<p>会把当前工程版本的Metadata目录拷贝至Release/Patch目录下（BackupMetadatas），可以方便管理DevelopmentAssetRegistry.bin和Shaderbytecode，可以用作版本的资产审计以及Shader Patch中。</p>
<h4 id="2021-02-23-Update"><a href="#2021-02-23-Update" class="headerlink" title="2021.02.23 Update"></a>2021.02.23 Update</h4><ul>
<li>ShaderPatch的文件生成提示</li>
<li>ShaderPatch的Commandlet（<code>-run=HotShaderPatch</code>）</li>
<li>修复Shader Patch的Reset Config错误</li>
<li>代码优化</li>
</ul>
<p>4.25+生成ShaderPatch会Crash的解决方案：<a href="https://imzlp.com/notes/ue/#UE4-25%E4%B8%ADShaderPatch%E9%97%AE%E9%A2%98">UE4.25中ShaderPatch问题</a></p>
<h4 id="2021-02-01-Update"><a href="#2021-02-01-Update" class="headerlink" title="2021.02.01 Update"></a>2021.02.01 Update</h4><ul>
<li>修复勾选<code>Recursive Widget tree</code>时会stack overflow造成的crash，相关issues：<a target="_blank" rel="noopener" href="https://github.com/hxhb/HotPatcher/issues/9">勾选recursive widget tree会几率栈溢出死循环，某些asset会必现。</a></li>
</ul>
<h4 id="2021-01-28-Update"><a href="#2021-01-28-Update" class="headerlink" title="2021.01.28 Update"></a>2021.01.28 Update</h4><ul>
<li>修复DebugGame Editor运行时无法拉起新进程</li>
<li>增加<code>bStandaloneMode</code>选项，可以控制是否拉起新进程执行任务（true会拉起新进程）</li>
</ul>
<h4 id="2021-01-22-Update"><a href="#2021-01-22-Update" class="headerlink" title="2021.01.22 Update"></a>2021.01.22 Update</h4><ul>
<li>HotPatcher的Patch Commandlet可以指定平台</li>
</ul>
<p>通过<code>-AddPatchPlatforms=WindowsNoEditor,Android_ASTC,IOS</code>方式添加，多个平台使用<code>,</code>分隔。</p>
<h4 id="2021-01-20-Update"><a href="#2021-01-20-Update" class="headerlink" title="2021.01.20 Update"></a>2021.01.20 Update</h4><ul>
<li>基础包分Chunk的情况下，支持Release为某个平台添加多个paklist文件</li>
</ul>
<h4 id="2021-01-19-Update"><a href="#2021-01-19-Update" class="headerlink" title="2021.01.19 Update"></a>2021.01.19 Update</h4><ul>
<li>支持通用的外部文件指定模式，可以解决在不同的项目路径之间使用通用的配置</li>
</ul>
<p>在指定外部文件/文件夹时可以使用<code>[PROJECTDIR]</code>在执行时会替换为真正的项目目录。</p>
<p>可选的路径为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ENGINEDIR]</span><br><span class="line">[ENGINE_CONTENT_DIR]</span><br><span class="line">[PROJECTDIR]</span><br><span class="line">[PROJECT_CONTENT_DIR]</span><br><span class="line">[PROJECT_SAVED_DIR]</span><br><span class="line">[PROJECT_CONFIG_DIR]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，在执行生产过程中会把真实的路径替换到当前的配置中（Patch和Release自动生成导出的配置文件都是绝对路径的，但是可以自己在编辑器内手动导出基于相对路径的配置文件）。</p>
</blockquote>
<p><img data-src="20210119112031.webp"></p>
<h4 id="2021-01-18-Update"><a href="#2021-01-18-Update" class="headerlink" title="2021.01.18 Update"></a>2021.01.18 Update</h4><ul>
<li>Release/Patch的生成不阻塞Editor</li>
<li>可以直接在Editor中看到Log</li>
<li>统一UE的Notification的创建方式</li>
</ul>
<p>本次更新是把之前阻塞Editor的方式改成了拉起一个Commandlet的进程任务来执行，不会对当前的编辑器进程造成影响，与UE打包时相同，避免卡住Editor的焦虑感。</p>
<h4 id="2021-01-14-Update"><a href="#2021-01-14-Update" class="headerlink" title="2021.01.14 Update"></a>2021.01.14 Update</h4><ul>
<li>修复Cook Engine目录下插件资源时的路径错误</li>
<li>byRelease支持命令行导入PlatformPakList</li>
</ul>
<p>添加方式为使用<code>-AddPlatformPakList=</code>，后面跟上平台名+PakList文件（可以支持多个文件，使用<code>+</code>分隔），多个平台可以使用逗号分隔。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-run=HotRelease -byPaklist=true -AddPlatformPakList=WindowsNoEditor+D:\PakList_FGame-WindowsNoEditor.txt -savepath.path=&quot;D:\\&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>三个Commandlet均支持替换Config中的参数</li>
</ul>
<p><img data-src="20210114164028.webp"></p>
<ul>
<li>HotRelease的Commandlet可以不指定config文件，直接指定值（需要指定导入paklist文件）</li>
</ul>
<p><img data-src="20210114211217.webp"></p>
<h4 id="2021-01-13-Update"><a href="#2021-01-13-Update" class="headerlink" title="2021.01.13 Update"></a>2021.01.13 Update</h4><ul>
<li>修复Patch中包含插件资源的Cook失败</li>
<li>修复Commandlet生成Patch加载不到资源</li>
<li>一些其他优化</li>
</ul>
<h4 id="2021-01-11-Update"><a href="#2021-01-11-Update" class="headerlink" title="2021.01.11 Update"></a>2021.01.11 Update</h4><ul>
<li>支持从项目中导入配置到Patch和Release的Setting中</li>
</ul>
<p><img data-src="HotPatcher/hotpatcher-import-project-setting.webp"></p>
<p><code>Project Settings</code>-<code>Packaging</code>-<code>Additional Asset Directories to Cook</code>会被添加到<code>AssetIncludeFilters</code>中。<br><code>Project Settings</code>-<code>Packaging</code>-<code>Directories to never cook</code>会被添加到<code>AssetIgnoreFilters</code>中。<br><code>Project Settings</code>-<code>Packaging</code>-<code>Additional Non-Asset Directories To Package</code>会被添加到<code>AddExternAssetsToPlatfotm</code>中（AllPlatform）。</p>
<p>项目中<code>Config/DefaultEditor.ini</code>里的<code>AlwaysCookMaps</code>和<code>AllMaps</code>Section下配置的所有地图会被添加至<code>IncludeSpecifyAssets</code>中，并且会勾上<code>bAnalysisAssetDependencies</code>。</p>
<h4 id="2021-01-08-Update"><a href="#2021-01-08-Update" class="headerlink" title="2021.01.08 Update"></a>2021.01.08 Update</h4><ul>
<li>支持在ContentBrowser中添加目录到PatchSettings</li>
<li>修复勾选CookAsset后通过Commnadlet生成Patch导致的<code>StaticFindObject</code>的crash错误</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LogWindows:Error:lllegal call to StaticFindObject() while serializing object data!</span><br></pre></td></tr></table></figure>

<h4 id="2020-12-14-Update"><a href="#2020-12-14-Update" class="headerlink" title="2020.12.14 Update"></a>2020.12.14 Update</h4><ul>
<li>添加UFlibPakReader函数库，可以实现在不Mount的情况下读取Pak中的文件</li>
</ul>
<h4 id="2020-12-11-Update"><a href="#2020-12-11-Update" class="headerlink" title="2020.12.11 Update"></a>2020.12.11 Update</h4><ul>
<li>支持Shaderbytecode的Patch，通过<code>byShaderPatch</code>页面配置执行；</li>
</ul>
<p><img data-src="20201211131553.webp"></p>
<p>Shaderbytecode Patch的要求：</p>
<ul>
<li>备份每次打包的Cooked/PLATFORM/PROJECT_NAME/Metadata目录；</li>
<li>最新版本的Cooked/PLATFORM/PROJECT_NAME/Metadata与旧版本的Metadata进行比对；</li>
<li>生成的ushaderbytecode文件可以通过HotPatcher添加外部文件形式打包，运行时加载；</li>
</ul>
<blockquote>
<p>注意：目前该功能在4.24及之前引擎版本正常，但是在4.25+中会触发异常，具体原因分析在这里：<a href="https://imzlp.com/notes/ue/#UE4-25%E4%B8%ADShaderPatch%E9%97%AE%E9%A2%98">UE4.25 中 ShaderPatch 问题</a>。解决这个问题需要改动引擎代码，可以根据上面笔记中的原因分析来修改。</p>
</blockquote>
<h4 id="2020-12-10-Update"><a href="#2020-12-10-Update" class="headerlink" title="2020.12.10 Update"></a>2020.12.10 Update</h4><ul>
<li>修复HotRelease的Commandlet导出失败问题</li>
</ul>
<h4 id="2020-12-04-Update"><a href="#2020-12-04-Update" class="headerlink" title="2020.12.04 Update"></a>2020.12.04 Update</h4><ul>
<li>HotPatcher支持UE4.26！</li>
<li>修复在编辑器中Cook资源后，对其修改保存导致资源在下次加载时失败的问题</li>
</ul>
<h4 id="2020-11-26-Update"><a href="#2020-11-26-Update" class="headerlink" title="2020.11.26 Update"></a>2020.11.26 Update</h4><ul>
<li>修复在Content Browser中Cook资源时的路径错误</li>
<li>修复在新版本代码中无法预览的问题</li>
</ul>
<h4 id="2020-11-08-Update"><a href="#2020-11-08-Update" class="headerlink" title="2020.11.08 Update"></a>2020.11.08 Update</h4><ul>
<li>支持对Cook单个资源时进行检测（对于新创建的资源，拿到的UPackage是不完全的， 使用它对资源进行Cook会Crash）</li>
<li>ContentBrowser右键Cook资源时支持Cook失败的提示。</li>
</ul>
<p><strong>注意</strong>：如果在工程中新建了资源，直接对这些资源进行Cook是有问题的，因为通过引擎拿到的新创建资源的Package内的数据是不完全的，会导致执行Cook时的Crash，目前插件中的策略是检测要进行Cook的UPackage数据是否正确，如果不正确会忽略掉该资源。</p>
<p>暂时的解决办法时，创建了资源之后重启编辑器，再对这些资源进行Cook或者创建Patch的操作，或者依然通过插件提供的Cook目录和指定地图的功能，不存在上面所说的这个问题，因为它的实现是拉起一个新的UE进程来执行Cook任务，所以本地的资源信息会重新加载）。</p>
<h4 id="2020-11-07-Update"><a href="#2020-11-07-Update" class="headerlink" title="2020.11.07 Update"></a>2020.11.07 Update</h4><ul>
<li>添加<code>bSaveDeletedAssetsToNewReleaseJson</code>：控制ContentBrowser中删除的资源是否存储到新ReleaseJson中去。</li>
</ul>
<p>其实就是两种版本管理模式：</p>
<ol>
<li>ReleaseJson中记录的是当前游戏版本中所有的资源（删除的资源，在UFS中依然存在，因为老Pak中的文件不会被删除）</li>
<li>ReleaseJson中记录的是游戏中需要让玩家能够体验到的所有资源（不包含移动目录、删除之后的资源）</li>
</ol>
<p>真正在游戏中的资源没有区别，区别在于HotPatcher管理的版本信息。</p>
<h4 id="2020-11-01-Update"><a href="#2020-11-01-Update" class="headerlink" title="2020.11.01 Update"></a>2020.11.01 Update</h4><ul>
<li>（UE4.23+）支持直接在ContentBrowser中把所选资源添加至Patch Settings；</li>
<li>支持在生成Patch时直接Cook资源（<code>bCookPatchAssets</code>）。需要注意的是，当Patch中资源很多的情况下，Cook十分耗时，并且需要编译Shader，会大大增加Patch 的生成时间，所以在生成Patch时开启Cook可以用在测试打包一些资源或者在ci中执行时开启，在编辑器中SlowTask进度会卡住编辑器；</li>
</ul>
<p><img data-src="cook-patch-assets.webp"></p>
<p><img data-src="add-to-patch-settings.webp"></p>
<h4 id="2020-10-31-Update"><a href="#2020-10-31-Update" class="headerlink" title="2020.10. 31 Update"></a>2020.10. 31 Update</h4><ul>
<li>支持Cook单个资源（shader code包含在资源内）；</li>
<li>（UE4.23+）支持在Content Browser中右键选中Assets(支持多选)进行Cook；</li>
</ul>
<p><img data-src="20201031181100.webp"></p>
<h4 id="2020-10-30-Dev-Update-Merged"><a href="#2020-10-30-Dev-Update-Merged" class="headerlink" title="2020.10. 30 Dev Update (Merged)"></a>2020.10. 30 Dev Update (Merged)</h4><ul>
<li>PatchSetting支持<code>bForceSkipContent</code>用于强制忽略某些目录中的资源</li>
<li><code>ForceSkipContentRules</code>为指定Patch中忽略的资源目录，默认值为<code>/Engine/Editor</code>和<code>/Engine/VREditor</code>，在项目设置中选择<code>Exclude editor content when cooking</code>这两个目录里的资源是不Cook的，所以也无法将他们打包。</li>
<li><code>ForceSkipAssets</code>在Patch版本中忽略指定的资源。</li>
<li>更名<code>DiffPatchVersion</code>等函数为<code>DiffPatchVersionWithPatchSetting</code>，并且传递<code>PatchSetting</code>，方便进行Diff时的选项控制。</li>
</ul>
<p>增加上述两个选项，一是为了与UE默认打包时不Cook的目录相匹配，二是可以自己控制哪些资源不被打包。<br>注意：<code>ForceSkipContentRules</code>与<code>AssetIgnoreFilters</code>的区别在于：<code>AssetIgnoreFilters</code>忽略的过滤器是进行资源依赖分析之前的步骤，可以用来设置为<code>AssetIncludeFilters</code>中的子目录；而<code>ForceSkipContentRules</code>是把经过diff之后的结果进行一遍过滤操作，排除这些前缀的资源。</p>
<p><img data-src="20201031094735.webp"></p>
<h4 id="2020-10-27-Dev-Update-Merged"><a href="#2020-10-27-Dev-Update-Merged" class="headerlink" title="2020.10. 27 Dev Update (Merged)"></a>2020.10. 27 Dev Update (Merged)</h4><ul>
<li>支持从打包生成的PakList文件中分析出Release</li>
<li>支持导入多个平台的PakList并分析出不同平台的文件差异</li>
<li>ReleaseSetting和PatchSetting类从UObject改为USTRUCT</li>
<li>统一使用序列化USTRUCT的方式来处理Import/Export配置</li>
<li>支持在Patch中给特定平台添加特殊的文件（只在指定平台包含）</li>
<li>使用<code>CustomDetailView</code>的方式给Detail面板添加导入PakList的按钮</li>
<li>重构部分代码，适配给不同平台添加特殊文件。</li>
<li>Release.json中剔除额外的配置信息</li>
<li>修复MountListener在4.24的错误</li>
</ul>
<blockquote>
<p>本次更新代码变动非常大，并且与之前版本导出的配置文件在当前版本中不通用，所以暂时发布到Dev分支，测试稳定之后合并到master分支，目前经过Relase/Patch/Chunk的流程测试，基本没有问题。</p>
</blockquote>
<p><img data-src="20201027123319.webp"></p>
<h4 id="2020-10-17-Update"><a href="#2020-10-17-Update" class="headerlink" title="2020.10.17 Update"></a>2020.10.17 Update</h4><ul>
<li>支持对Widget的WidgetTree进行分析，解决子控件修改父控件不生效的问题</li>
</ul>
<p>如果一个Widget被修改了，能够通过控制这个选项来是否递归地添加所有包含它的Widget资源，可以解决修改了子控件，打patch父控件不生效的问题了。</p>
<p><img data-src="HotPatcher/recursivr-widget-tree.webp"></p>
<h4 id="2020-08-31-Update"><a href="#2020-08-31-Update" class="headerlink" title="2020.08.31 Update"></a>2020.08.31 Update</h4><ul>
<li>增加导出Release的Commandlet支持</li>
<li>清理重复的代码，整理组织方式</li>
<li>增加控制生成Pak的命名规则</li>
<li>修复Chunk不包含任何文件时也会打出空包的问题</li>
<li>修复<code>UFlibPakHelper::GetMountedPaks</code>在4.25中Crash的问题</li>
</ul>
<h4 id="2020-06-04-Update"><a href="#2020-06-04-Update" class="headerlink" title="2020.06.04 Update"></a>2020.06.04 Update</h4><ul>
<li>增加Cook导出配置的<code>bCookAllMap</code>属性，当为true时，在Commandlet模式下会Cook工程目录下中所有的地图。</li>
<li>增加<strong>ByRelease</strong>支持通过<code>PakList*.txt</code>来生成配置，从而可以完全匹配基础包中的所有资源。</li>
</ul>
<h4 id="2020-06-03-Update"><a href="#2020-06-03-Update" class="headerlink" title="2020.06.03 Update"></a>2020.06.03 Update</h4><ul>
<li>增加插件Cook的Commandlet</li>
<li>增加插件Patch的Commandlet</li>
</ul>
<h4 id="2020-04-27-Update"><a href="#2020-04-27-Update" class="headerlink" title="2020.04.27 Update"></a>2020.04.27 Update</h4><ul>
<li>增加Chunk的<code>bMonolithic</code>模式下的<code>MonolithicPathMode</code>，用于指定单片模式下的pak存储路径规则。</li>
</ul>
<h4 id="2020-04-24-Update"><a href="#2020-04-24-Update" class="headerlink" title="2020.04.24 Update"></a>2020.04.24 Update</h4><ul>
<li>增加是否对过滤器中的资源进行依赖分析的选项</li>
</ul>
<h4 id="2020-04-23-Update"><a href="#2020-04-23-Update" class="headerlink" title="2020.04.23 Update"></a>2020.04.23 Update</h4><ul>
<li>增加可选引用资源的类型</li>
</ul>
<h4 id="2020-04-18-Update"><a href="#2020-04-18-Update" class="headerlink" title="2020.04.18 Update"></a>2020.04.18 Update</h4><ul>
<li>为<code>UnrealOptions</code>默认添加<code>-compressionformats</code>参数。</li>
<li>增加<code>PreviewChunk</code>的选项，在开启Chunk的情况下可以方便地知道哪个chunk中有哪些资源。</li>
</ul>
<h4 id="2020-04-10-Update"><a href="#2020-04-10-Update" class="headerlink" title="2020.04.10 Update"></a>2020.04.10 Update</h4><ul>
<li>增加<code>ReplacePakCommandTexts</code>选项，可以自己根据需求替换PakCommand.txt中的文本，如替换打到pak中的资源的<code>MountPath</code></li>
</ul>
<h4 id="2020-04-09-Update"><a href="#2020-04-09-Update" class="headerlink" title="2020.04.09 Update"></a>2020.04.09 Update</h4><ul>
<li>修复在没有选择过滤器时从PatchSetting生成Chunk的问题/对资源重定向器的溯源操作</li>
<li>修复转换Cooked路径时的问题</li>
<li>支持导出所有pak的信息、删除pakversion选项</li>
<li>支持Release和Patch导出资源的依赖关系</li>
<li>给ExportRelease增加FScopeSlowTask进度显示</li>
<li>增加可以指定<code>PakCommand</code>参数的选项</li>
</ul>
<h4 id="2020-04-08-Update"><a href="#2020-04-08-Update" class="headerlink" title="2020.04.08 Update"></a>2020.04.08 Update</h4><ul>
<li>支持多线程打包Pak，直接调用<code>    ExecuteUnrealPak</code>而不是启动<code>UnrealPak.exe</code>，极大提升效率。</li>
<li>修复PreviewPatch在选中BaseVersion的情况下与Diff信息不一致的问题</li>
</ul>
<h4 id="2020-04-07-Update"><a href="#2020-04-07-Update" class="headerlink" title="2020.04.07 Update"></a>2020.04.07 Update</h4><ul>
<li>支持<code>bMonolithic</code>模式，可以把所有引用每个资源单独打到一个pak中。</li>
<li>统一了Asset、Cooked的bin、外部文件、ini等所有文件的pak方式。</li>
</ul>
<p><img data-src="HotPatcher/hotpatcher-chunk-settings.webp"></p>
<p><img data-src="HotPatcher/hotpatcher-chunk-bmonilithic-mode-generated-files.webp"></p>
<h4 id="2020-04-03-Update"><a href="#2020-04-03-Update" class="headerlink" title="2020.04.03 Update"></a>2020.04.03 Update</h4><ul>
<li>完成Patch的Chunk功能，统一Patch和Chunk的打包流程</li>
<li>代码优化、流程梳理</li>
<li>去除<code>IncludePakVersionFile</code>和<code>PakVersionFileMountPoint</code>选项</li>
</ul>
<h4 id="2020-04-02-Update"><a href="#2020-04-02-Update" class="headerlink" title="2020.04.02 Update"></a>2020.04.02 Update</h4><ul>
<li>增加Patch的Chunk功能</li>
<li>修复<code>FPatcherSpecifyAsset</code>序列化与反序列化的问题</li>
<li>优化组织结构</li>
</ul>
<h4 id="2020-03-28-Update"><a href="#2020-03-28-Update" class="headerlink" title="2020.03.28 Update"></a>2020.03.28 Update</h4><ul>
<li>修复当基于基础版本打patch时导出的<code>*Release.json</code>不全的问题。</li>
</ul>
<h4 id="2020-03-05-Update"><a href="#2020-03-05-Update" class="headerlink" title="2020.03.05 Update"></a>2020.03.05 Update</h4><ul>
<li>修复当Cook的进程异常退出时没有清掉任务状态的问题。</li>
<li>在代码中增加Cook时可选Engine或Plugin中的地图，在<code>HotPatcherEditor.build.cs</code>中通过控制<code>ENABLE_COOK_ENGINE_MAP</code>和<code>ENABLE_COOK_PLUGIN_MAP</code>的值来自行开启。</li>
</ul>
<h4 id="2020-02-14-Update"><a href="#2020-02-14-Update" class="headerlink" title="2020.02.14 Update"></a>2020.02.14 Update</h4><ul>
<li>增加了Patch和Release配置的导入导出</li>
<li>生成Pak的默认命名改成XXX_TARGET_PLATFORM_001_P.pak</li>
<li>修复了一些潜在问题，建议更新。</li>
</ul>
<h4 id="2019-12-08-Update"><a href="#2019-12-08-Update" class="headerlink" title="2019.12.08 Update"></a>2019.12.08 Update</h4><ul>
<li>新增是否对资源进行依赖扫描的选项，增加diff预览。</li>
</ul>
<p><img data-src="HotPatcher/HotPatcher-Diff-view.webp"></p>
<h4 id="2020-02-19-Update"><a href="#2020-02-19-Update" class="headerlink" title="2020.02.19 Update"></a>2020.02.19 Update</h4><ul>
<li>为插件增加了导出release时可以选择添加外部文件和文件夹，对应ue打包时添加的非资源外部文件目录。还支持外部文件的diff（可选），对于指定的外部文件和目录，会检测只有修改或者新增的文件才会打包到pak中。</li>
</ul>
<h4 id="2020-01-13-Update"><a href="#2020-01-13-Update" class="headerlink" title="2020.01.13 Update"></a>2020.01.13 Update</h4><ul>
<li>新增生成时的错误信息提示，对未Cook资源的扫描以及重复添加的外部文件进行检测，增加可以指定特定资源到Pak中，并且可选是否对该资源进行依赖分析。</li>
</ul>
<p><img data-src="HotPatcher/HotPatcher-GeneratedPatch-ErrorMsg.webp"></p>
<h4 id="2020-01-14-Update"><a href="#2020-01-14-Update" class="headerlink" title="2020.01.14 Update"></a>2020.01.14 Update</h4><ul>
<li>修复会扫描到Redirector会提示Redirector的资源未Cooked，为ExportRelease增加<code>IncludeSpecifyAssets</code>，可以指定某个资源了（如只指定某个地图）。</li>
</ul>
<p><img data-src="HotPatcher/HotPatcher-diff-specifty-assets.webp"></p>
<h4 id="2020-01-19-Update"><a href="#2020-01-19-Update" class="headerlink" title="2020.01.19 Update"></a>2020.01.19 Update</h4><ul>
<li>增加指定要Cook的目录</li>
</ul>
<p><img data-src="HotPatcher/HotPatcher-Add-Specify-Cook-Directories.webp"></p>
<h3 id="更新计划"><a href="#更新计划" class="headerlink" title="更新计划"></a>更新计划</h3><p>为了使HotPatcher更易用和更强大，我会在这里记录一些不错的更新建议。</p>
<ol>
<li><del>增加支持多线程扫描资源依赖分析</del>(通过拉起单独的进程执行)</li>
<li><del>在UnrealPak下增加直接指定Pak加密参数的选项（开放了可以指定UnrealPak的参数，自己指定加密的参数即可）</del></li>
<li><del>指定Cook单个资源</del></li>
<li><del>把打包出的Pak命名从<code>XX_TARGET_PLATFORM_P.pak</code>改成<code>XX_TARGET_PLATFORM_0_P</code>或者中间的数字可以指定。</del></li>
<li><del>Patch和Release配置文件的导入和导出、以及快速地清理配置。</del></li>
<li><del>为release增加包含外部文件的选项，与UE的打包时包含外部文件同步。</del></li>
<li><del>增加对外部文件的Diff，不用每次打包时把所有的外部文件都打包到pak中。</del></li>
<li><del>在一个Patch中打包出多个pak文件，可选哪些资源打到哪个Pak中。</del></li>
<li><del>为<code>Chunk</code>的<code>bMonolithic</code>模式增加多线程支持</del></li>
<li><del>增加<code>Commandlet</code>的支持</del></li>
<li><del>增加导出Release的Commandlet支持</del></li>
<li><del>增加可控制生成Pak的命名规则</del></li>
<li><del>支持打Patch时给特殊的平台添加NoAssets资源</del></li>
<li><del>追踪UMG的子控件被修改后引用到它的Widget资源</del></li>
<li><del>支持给多个从多个平台的paklist中分析基础包的Release.json</del></li>
<li><del>对Patch的最终结果进行过滤</del></li>
<li><del>设置忽略Editor的资源内容</del></li>
<li><del>添加的外部文件以相对路径存储于Release.json中</del>(使用Mountpath来进行版本比对)</li>
<li><del>支持打出shaderbytecode的patch</del></li>
<li><del>Patch时不阻塞编辑器，使用异步任务实现</del></li>
</ol>

    </div>

    
    
        
        
          
            <blockquote class="blockquote-center">
              
                本文会持续更新HotPatcher的文档。
              
            <br/>
            
                <div class="qr-code" onclick="return false">
                    <script src="/js/qrcode.min.js"></script>
                    <div id="qrcode">
                      
                        <img src="https://imzlp.com/images/wechat-qrcode.webp">
                      
                    <p>微信扫描二维码，关注我的公众号。</p>
                    </div>
                </div>
            
            </blockquote>
          
        

        
          <div class="postCopyright" style="clear:both;">
             <span>本文标题:</span><a href="/posts/17590/" target="_blank">UE4资源热更打包工具HotPatcher</a><br/>
             <span>文章作者:</span><a href="/about" target="_blank" title="查看 查利鹏 的资料">查利鹏</a><br/>
             <span>发布时间:</span>2020年01月15日 09时41分<br/>
             
             <span>本文字数:</span><span class="page-count">本文一共有17k字</span><br/>
             
             <span>原始链接:</span><a href="/posts/17590/" target="_blank" title="UE4资源热更打包工具HotPatcher">https://imzlp.com/posts/17590/</a>
             <span class="copy-path" data-clipboard-text="原文链接: https://imzlp.com/posts/17590/ 作者: 查利鹏" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
             <script src="/js/jquery.min.js"></script>
             <script src="/js/clipboard.min.js"></script>
             <script> var clipboard = new Clipboard('.copy-path'); </script>
             <br/>
             
             	<span>专栏链接:</span><a href="https://zhuanlan.zhihu.com/p/103743690/" target="_blank" title="UE4资源热更打包工具HotPatcher">https://zhuanlan.zhihu.com/p/103743690/</a>
	             <br/>
             
             <span>许可协议:</span><i class="fab fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="Attribution-NonCommercial-ShareAlike 4.0 International">CC BY-NC-SA 4.0</a><br/>
             
             <span>转载请保留原文链接及作者信息，谢谢！</span>
          </div>
        
    
        
  <div class="reward-container">
    <div>您的捐赠将鼓励我继续创作！</div>
    <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
      打赏
    </button>
    <div id="qr" style="display: none;">
        
        <div style="display: inline-block;">
          <img src="/images/reward/wechatpay.webp" alt="查利鹏 微信支付">
          <p>微信支付</p>
        </div>
        
        <div style="display: inline-block;">
          <img src="/images/reward/alipay.webp" alt="查利鹏 支付宝">
          <p>支付宝</p>
        </div>

    </div>
  </div>



      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Unreal-Engine/" rel="tag"># Unreal Engine</a>
              <a href="/tags/%E7%83%AD%E6%9B%B4%E6%96%B0/" rel="tag"># 热更新</a>
              <a href="/tags/HotPatcher/" rel="tag"># HotPatcher</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/20367/" rel="prev" title="UE4源码分析：修改游戏默认的数据存储路径">
      <i class="fa fa-chevron-left"></i> UE4源码分析：修改游戏默认的数据存储路径
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/25915/" rel="next" title="UE4项目的设计规范和代码标准">
      UE4项目的设计规范和代码标准 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="hxhb/blog-comments" issue-term="title" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">插件使用流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cook%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="nav-number">2.</span> <span class="nav-text">Cook参数说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ByRelease%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="nav-number">3.</span> <span class="nav-text">ByRelease参数说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Release-Settings"><span class="nav-number">3.1.</span> <span class="nav-text">Release Settings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SaveTo"><span class="nav-number">3.2.</span> <span class="nav-text">SaveTo</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ByPatch%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="nav-number">4.</span> <span class="nav-text">ByPatch参数说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BaseVersion"><span class="nav-number">4.1.</span> <span class="nav-text">BaseVersion</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PatchSettings"><span class="nav-number">4.2.</span> <span class="nav-text">PatchSettings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ChunkOptions"><span class="nav-number">4.3.</span> <span class="nav-text">ChunkOptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PakOptions"><span class="nav-number">4.4.</span> <span class="nav-text">PakOptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SaveTo-1"><span class="nav-number">4.5.</span> <span class="nav-text">SaveTo</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Commandlet"><span class="nav-number">5.</span> <span class="nav-text">Commandlet</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HotCooker"><span class="nav-number">5.1.</span> <span class="nav-text">HotCooker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HotPatcher"><span class="nav-number">5.2.</span> <span class="nav-text">HotPatcher</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HotRelease"><span class="nav-number">5.3.</span> <span class="nav-text">HotRelease</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HotShaderPatch"><span class="nav-number">5.4.</span> <span class="nav-text">HotShaderPatch</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E5%99%A8%E6%94%AF%E6%8C%81-UE4-23"><span class="nav-number">6.</span> <span class="nav-text">编辑器支持(UE4.23+)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Cook"><span class="nav-number">6.1.</span> <span class="nav-text">Cook</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AddToPatchSettings"><span class="nav-number">6.2.</span> <span class="nav-text">AddToPatchSettings</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Update-Log"><span class="nav-number">7.</span> <span class="nav-text">Update Log</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-03-15-Update"><span class="nav-number">7.1.</span> <span class="nav-text">2021.03.15 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-02-23-Update"><span class="nav-number">7.2.</span> <span class="nav-text">2021.02.23 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-02-01-Update"><span class="nav-number">7.3.</span> <span class="nav-text">2021.02.01 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-28-Update"><span class="nav-number">7.4.</span> <span class="nav-text">2021.01.28 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-22-Update"><span class="nav-number">7.5.</span> <span class="nav-text">2021.01.22 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-20-Update"><span class="nav-number">7.6.</span> <span class="nav-text">2021.01.20 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-19-Update"><span class="nav-number">7.7.</span> <span class="nav-text">2021.01.19 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-18-Update"><span class="nav-number">7.8.</span> <span class="nav-text">2021.01.18 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-14-Update"><span class="nav-number">7.9.</span> <span class="nav-text">2021.01.14 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-13-Update"><span class="nav-number">7.10.</span> <span class="nav-text">2021.01.13 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-11-Update"><span class="nav-number">7.11.</span> <span class="nav-text">2021.01.11 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2021-01-08-Update"><span class="nav-number">7.12.</span> <span class="nav-text">2021.01.08 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-12-14-Update"><span class="nav-number">7.13.</span> <span class="nav-text">2020.12.14 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-12-11-Update"><span class="nav-number">7.14.</span> <span class="nav-text">2020.12.11 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-12-10-Update"><span class="nav-number">7.15.</span> <span class="nav-text">2020.12.10 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-12-04-Update"><span class="nav-number">7.16.</span> <span class="nav-text">2020.12.04 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-11-26-Update"><span class="nav-number">7.17.</span> <span class="nav-text">2020.11.26 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-11-08-Update"><span class="nav-number">7.18.</span> <span class="nav-text">2020.11.08 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-11-07-Update"><span class="nav-number">7.19.</span> <span class="nav-text">2020.11.07 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-11-01-Update"><span class="nav-number">7.20.</span> <span class="nav-text">2020.11.01 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-10-31-Update"><span class="nav-number">7.21.</span> <span class="nav-text">2020.10. 31 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-10-30-Dev-Update-Merged"><span class="nav-number">7.22.</span> <span class="nav-text">2020.10. 30 Dev Update (Merged)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-10-27-Dev-Update-Merged"><span class="nav-number">7.23.</span> <span class="nav-text">2020.10. 27 Dev Update (Merged)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-10-17-Update"><span class="nav-number">7.24.</span> <span class="nav-text">2020.10.17 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-08-31-Update"><span class="nav-number">7.25.</span> <span class="nav-text">2020.08.31 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-06-04-Update"><span class="nav-number">7.26.</span> <span class="nav-text">2020.06.04 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-06-03-Update"><span class="nav-number">7.27.</span> <span class="nav-text">2020.06.03 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-27-Update"><span class="nav-number">7.28.</span> <span class="nav-text">2020.04.27 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-24-Update"><span class="nav-number">7.29.</span> <span class="nav-text">2020.04.24 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-23-Update"><span class="nav-number">7.30.</span> <span class="nav-text">2020.04.23 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-18-Update"><span class="nav-number">7.31.</span> <span class="nav-text">2020.04.18 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-10-Update"><span class="nav-number">7.32.</span> <span class="nav-text">2020.04.10 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-09-Update"><span class="nav-number">7.33.</span> <span class="nav-text">2020.04.09 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-08-Update"><span class="nav-number">7.34.</span> <span class="nav-text">2020.04.08 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-07-Update"><span class="nav-number">7.35.</span> <span class="nav-text">2020.04.07 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-03-Update"><span class="nav-number">7.36.</span> <span class="nav-text">2020.04.03 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-04-02-Update"><span class="nav-number">7.37.</span> <span class="nav-text">2020.04.02 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-03-28-Update"><span class="nav-number">7.38.</span> <span class="nav-text">2020.03.28 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-03-05-Update"><span class="nav-number">7.39.</span> <span class="nav-text">2020.03.05 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-02-14-Update"><span class="nav-number">7.40.</span> <span class="nav-text">2020.02.14 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2019-12-08-Update"><span class="nav-number">7.41.</span> <span class="nav-text">2019.12.08 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-02-19-Update"><span class="nav-number">7.42.</span> <span class="nav-text">2020.02.19 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-01-13-Update"><span class="nav-number">7.43.</span> <span class="nav-text">2020.01.13 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-01-14-Update"><span class="nav-number">7.44.</span> <span class="nav-text">2020.01.14 Update</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2020-01-19-Update"><span class="nav-number">7.45.</span> <span class="nav-text">2020.01.19 Update</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%A1%E5%88%92"><span class="nav-number">8.</span> <span class="nav-text">更新计划</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="查利鹏"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">查利鹏</p>
  <div class="site-description" itemprop="description">每一篇文章都是一个成长的过程。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">141</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">130</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hxhb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hxhb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/imzlp" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;imzlp" rel="noopener" target="_blank"><i class="fa fa-custom zhihu fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat-qrcode-offical.webp" title="微信公众号 → &#x2F;images&#x2F;wechat-qrcode-offical.webp"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:visionsmile@gmail.com" title="E-Mail → mailto:visionsmile@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://docs.imzlp.com/" title="https:&#x2F;&#x2F;docs.imzlp.com&#x2F;" rel="noopener" target="_blank">TechDocuments</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://linux.imzlp.com/" title="https:&#x2F;&#x2F;linux.imzlp.com&#x2F;" rel="noopener" target="_blank">LinuxCommands</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://books.imzlp.com/" title="https:&#x2F;&#x2F;books.imzlp.com&#x2F;" rel="noopener" target="_blank">IT Books Search</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://soft.imzlp.com/" title="https:&#x2F;&#x2F;soft.imzlp.com&#x2F;" rel="noopener" target="_blank">Software Search</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue4coderules.imzlp.com/" title="https:&#x2F;&#x2F;ue4coderules.imzlp.com&#x2F;" rel="noopener" target="_blank">UE4 Code Rules</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://consolehelp.imzlp.com/" title="https:&#x2F;&#x2F;consolehelp.imzlp.com&#x2F;" rel="noopener" target="_blank">UE4 Console Help</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue4wiki.imzlp.com/" title="https:&#x2F;&#x2F;ue4wiki.imzlp.com&#x2F;" rel="noopener" target="_blank">UE4 Wiki</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ue5lab.com/#/" title="https:&#x2F;&#x2F;ue5lab.com&#x2F;#&#x2F;" rel="noopener" target="_blank">UE5 Lab</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备2021027036号 </a>
  </div>

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">查利鹏</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">543k</span>
</div>
  <div class="powered-by-other">
    
	    <center>Github Pages | Actions | NeXT | Cloudflare | Hexo Deploy</center>
      
  </div>

<script>
function checkWebp(callback) {
    var img = new Image();
    img.onload = function () { callback((img.width > 0) && (img.height > 0)); };
    img.onerror = function () { callback(false); };
    img.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';
}
function showImage(useWebp) {
    var imgs = [].slice.call(document.querySelectorAll('img'));
    imgs.forEach(function (e) {
        if (!useWebp) {
            var src = e.getAttribute('data-src')
            src = src.replace(/\.webp$/, '.png');
            e.setAttribute('data-src', src);
        }
    });
}
checkWebp(showImage);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://imzlp.com/posts/17590/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'oCE6RMVkVoi5MgUhvFsn1EvV-gzGzoHsz',
      appKey     : 'K9SOaNYJ8PV6xaoFggWG5xvv',
      placeholder: "留下点什么吧~",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
